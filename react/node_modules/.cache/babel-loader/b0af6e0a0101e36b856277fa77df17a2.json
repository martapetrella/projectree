{"ast":null,"code":"import _classCallCheck from \"/Users/wefed01/Sites/affx/offerprive.it/react/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/wefed01/Sites/affx/offerprive.it/react/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/wefed01/Sites/affx/offerprive.it/react/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/wefed01/Sites/affx/offerprive.it/react/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/wefed01/Sites/affx/offerprive.it/react/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/wefed01/Sites/affx/offerprive.it/react/src/pages/Prods/Prod/index.js\";\nimport './style.scss';\nimport React, { Component } from 'react';\nimport ProdFull from './ProdFull';\nimport ProdEmpty from './ProdEmpty';\nimport Loading from 'pages/Loading';\nimport { connect } from \"react-redux\";\nimport { getVisibleProd } from 'state/selectors';\nimport { fetchProd, setLoading } from 'state/actions';\nimport withTemplate from 'templates/';\n\nvar Prod =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Prod, _Component);\n\n  function Prod() {\n    _classCallCheck(this, Prod);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Prod).apply(this, arguments));\n  }\n\n  _createClass(Prod, [{\n    key: \"componentWillReceiveProps\",\n    // // pulisco lo stato\n    // cleanComponent( nextProp ) {\n    //   window.scrollTo(0, 0)\n    //   // esci dalla funzione se non soddisfa le caratteristiche (evita l'uso di if/else)\n    //   if ( nextProp === undefined || nextProp === this.props.prod.id )  return\n    //   // se non esce, esegue la funzione\n    //   const { params } = this.props.match\n    //   this.props.dispatch(\n    //     fetchProd( params.id )\n    //   )\n    // }\n    value: function componentWillReceiveProps(nextProps) {\n      var nextProp = nextProps.location.state; // esci dalla funzione se non soddisfa le caratteristiche (evita l'uso di if/else)\n\n      if (nextProp === undefined || nextProp === this.props.prod.id) return; // risetto il loader a true per attendere il nuovo prodotto\n\n      this.props.dispatch(setLoading(true)); // se non esce, esegue la funzione\n\n      window.scrollTo(0, 0);\n      var params = this.props.match.params;\n      var parametro = !isNaN(params.id) ? params.id : params.slug;\n      this.props.dispatch(fetchProd(parametro));\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var params = this.props.match.params;\n      var parametro = !isNaN(params.id) ? params.id : params.slug;\n      this.props.dispatch(fetchProd(parametro));\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      // risetto il loader a true per attendere il nuovo prodotto\n      this.props.dispatch(setLoading(true));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          prod = _this$props.prod,\n          loading = _this$props.loading,\n          currency = _this$props.currency;\n\n      if (loading) {\n        return React.createElement(Loading, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 52\n          },\n          __self: this\n        });\n      } // setto il layout del prodotto\n\n\n      var Prodotto = !prod || prod === undefined || prod.length <= 0 ? React.createElement(ProdEmpty, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55\n        },\n        __self: this\n      }) : React.createElement(ProdFull, {\n        prod: prod,\n        currency: currency,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56\n        },\n        __self: this\n      });\n      return React.createElement(\"div\", {\n        className: \"p-prod\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58\n        },\n        __self: this\n      }, Prodotto);\n    }\n  }]);\n\n  return Prod;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  var currency = state.currency,\n      prod = state.prod;\n  return {\n    prod: getVisibleProd(state),\n    currency: currency,\n    loading: prod.loading\n  };\n};\n\nexport default connect(mapStateToProps)(withTemplate(Prod));","map":{"version":3,"sources":["/Users/wefed01/Sites/affx/offerprive.it/react/src/pages/Prods/Prod/index.js"],"names":["React","Component","ProdFull","ProdEmpty","Loading","connect","getVisibleProd","fetchProd","setLoading","withTemplate","Prod","nextProps","nextProp","location","state","undefined","props","prod","id","dispatch","window","scrollTo","params","match","parametro","isNaN","slug","loading","currency","Prodotto","length","mapStateToProps"],"mappings":"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","sourcesContent":["import './style.scss';\nimport React, { Component } from 'react'\nimport ProdFull from './ProdFull'\nimport ProdEmpty from './ProdEmpty'\nimport Loading from 'pages/Loading'\nimport { connect } from \"react-redux\";\nimport { getVisibleProd } from 'state/selectors'\nimport { fetchProd, setLoading } from 'state/actions'\nimport withTemplate from 'templates/'\n\nclass Prod extends Component {\n  // // pulisco lo stato\n  // cleanComponent( nextProp ) {\n  //   window.scrollTo(0, 0)\n  //   // esci dalla funzione se non soddisfa le caratteristiche (evita l'uso di if/else)\n  //   if ( nextProp === undefined || nextProp === this.props.prod.id )  return\n  //   // se non esce, esegue la funzione\n  //   const { params } = this.props.match\n  //   this.props.dispatch(\n  //     fetchProd( params.id )\n  //   )\n  // }\n\n  componentWillReceiveProps(nextProps) {\n    const nextProp = nextProps.location.state\n    // esci dalla funzione se non soddisfa le caratteristiche (evita l'uso di if/else)\n    if ( nextProp === undefined || nextProp === this.props.prod.id )  return\n    // risetto il loader a true per attendere il nuovo prodotto\n    this.props.dispatch( setLoading(true) )\n    // se non esce, esegue la funzione\n    window.scrollTo(0, 0)\n    const { params } = this.props.match\n\n    const parametro = !isNaN(params.id) ? params.id : params.slug\n    this.props.dispatch( fetchProd( parametro ) )\n  }\n\n  componentDidMount() {\n    const { params } = this.props.match\n\n    const parametro = !isNaN(params.id) ? params.id : params.slug\n    this.props.dispatch( fetchProd( parametro ) )\n  }\n\n  componentWillUnmount() {\n    // risetto il loader a true per attendere il nuovo prodotto\n    this.props.dispatch( setLoading(true) )\n  }\n\n  render() {\n    const { prod, loading, currency } = this.props\n    if (loading) { return ( <Loading /> ) }\n    // setto il layout del prodotto\n    const Prodotto = ( ! prod || prod === undefined || prod.length <= 0 )\n                        ? <ProdEmpty />\n                        : <ProdFull prod={prod} currency={currency} />\n    return (\n      <div className=\"p-prod\">\n          {Prodotto}\n      </div>\n    )\n  }\n}\nconst mapStateToProps = (state) => {\n  const { currency, prod } = state\n  return {\n    prod: getVisibleProd(state),\n    currency,\n    loading: prod.loading\n  }\n}\nexport default connect(mapStateToProps)( withTemplate(Prod) );\n"]},"metadata":{},"sourceType":"module"}