{"ast":null,"code":"import _classCallCheck from \"/Users/wefed01/Sites/affx/public_html/react/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/wefed01/Sites/affx/public_html/react/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/wefed01/Sites/affx/public_html/react/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/wefed01/Sites/affx/public_html/react/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/wefed01/Sites/affx/public_html/react/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/wefed01/Sites/affx/public_html/react/src/pages/Prods/Relateds/index.js\";\nimport React, { Component } from 'react';\nimport ProdFull from './ProdFull';\nimport Loading from 'pages/Loading';\nimport { connect } from \"react-redux\";\nimport { getVisibleProd } from 'state/selectors';\nimport { fetchProd, setLoading } from 'state/actions';\nimport withTemplate from 'templates/';\nimport { Redirect } from 'react-router-dom';\nimport { i18nContext } from 'contexts/i18n';\n\nvar Prod =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Prod, _Component);\n\n  function Prod() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Prod);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Prod)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _this.renderRedirect = function () {\n      var prod = _this.props.prod;\n\n      if (!prod || prod === undefined || prod.length <= 0) {\n        return React.createElement(Redirect, {\n          to: \"/\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 52\n          },\n          __self: this\n        });\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(Prod, [{\n    key: \"componentWillReceiveProps\",\n    // // pulisco lo stato\n    // cleanComponent( nextProp ) {\n    //   window.scrollTo(0, 0)\n    //   // esci dalla funzione se non soddisfa le caratteristiche (evita l'uso di if/else)\n    //   if ( nextProp === undefined || nextProp === this.props.prod.id )  return\n    //   // se non esce, esegue la funzione\n    //   const { params } = this.props.match\n    //   this.props.dispatch(\n    //     fetchProd( params.id )\n    //   )\n    // }\n    value: function componentWillReceiveProps(nextProps) {\n      var nextProp = nextProps.location.state; // esci dalla funzione se non soddisfa le caratteristiche (evita l'uso di if/else)\n\n      if (nextProp === undefined || nextProp === this.props.prod.id) return; // risetto il loader a true per attendere il nuovo prodotto\n\n      this.props.dispatch(setLoading(true)); // se non esce, esegue la funzione\n\n      window.scrollTo(0, 0);\n      var params = this.props.match.params;\n      this.props.dispatch(fetchProd(params.id));\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var params = this.props.match.params;\n      this.props.dispatch(fetchProd(params.id));\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      // risetto il loader a true per attendere il nuovo prodotto\n      this.props.dispatch(setLoading(true));\n    } // se il prodotto non esiste, faccio redirect alla home\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var i18n = this.context;\n      var _this$props = this.props,\n          prod = _this$props.prod,\n          loading = _this$props.loading,\n          currency = _this$props.currency;\n\n      if (loading) {\n        return React.createElement(Loading, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 60\n          },\n          __self: this\n        });\n      }\n\n      return React.createElement(\"div\", {\n        className: \"p-prod\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62\n        },\n        __self: this\n      }, this.renderRedirect(), React.createElement(ProdFull, {\n        prod: prod,\n        currency: currency,\n        title: i18n.also_interested,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return Prod;\n}(Component);\n\nProd.contextType = i18nContext;\n\nvar mapStateToProps = function mapStateToProps(state) {\n  var currency = state.currency,\n      prod = state.prod;\n  return {\n    prod: getVisibleProd(state),\n    currency: currency,\n    loading: prod.loading\n  };\n};\n\nProd.contextType = i18nContext;\nexport default connect(mapStateToProps)(withTemplate(Prod));","map":{"version":3,"sources":["/Users/wefed01/Sites/affx/public_html/react/src/pages/Prods/Relateds/index.js"],"names":["React","Component","ProdFull","Loading","connect","getVisibleProd","fetchProd","setLoading","withTemplate","Redirect","i18nContext","Prod","renderRedirect","prod","props","undefined","length","nextProps","nextProp","location","state","id","dispatch","window","scrollTo","params","match","i18n","context","loading","currency","also_interested","contextType","mapStateToProps"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,QAAP,MAAqB,YAArB;AACA,OAAOC,OAAP,MAAoB,eAApB;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,cAAT,QAA+B,iBAA/B;AACA,SAASC,SAAT,EAAoBC,UAApB,QAAsC,eAAtC;AACA,OAAOC,YAAP,MAAyB,YAAzB;AACA,SAASC,QAAT,QAAyB,kBAAzB;AACA,SAAQC,WAAR,QAA0B,eAA1B;;IAEMC,I;;;;;;;;;;;;;;;;;;UAsCJC,c,GAAiB,YAAM;AAAA,UACbC,IADa,GACJ,MAAKC,KADD,CACbD,IADa;;AAErB,UAAK,CAAEA,IAAF,IAAUA,IAAI,KAAKE,SAAnB,IAAgCF,IAAI,CAACG,MAAL,IAAe,CAApD,EAAwD;AACtD,eAAO,oBAAC,QAAD;AAAU,UAAA,EAAE,EAAC,GAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAP;AACD;AACF,K;;;;;;;AA1CD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;8CAE0BC,S,EAAW;AACnC,UAAMC,QAAQ,GAAGD,SAAS,CAACE,QAAV,CAAmBC,KAApC,CADmC,CAEnC;;AACA,UAAKF,QAAQ,KAAKH,SAAb,IAA0BG,QAAQ,KAAK,KAAKJ,KAAL,CAAWD,IAAX,CAAgBQ,EAA5D,EAAkE,OAH/B,CAInC;;AACA,WAAKP,KAAL,CAAWQ,QAAX,CAAqBf,UAAU,CAAC,IAAD,CAA/B,EALmC,CAMnC;;AACAgB,MAAAA,MAAM,CAACC,QAAP,CAAgB,CAAhB,EAAmB,CAAnB;AAPmC,UAQ3BC,MAR2B,GAQhB,KAAKX,KAAL,CAAWY,KARK,CAQ3BD,MAR2B;AAUnC,WAAKX,KAAL,CAAWQ,QAAX,CAAqBhB,SAAS,CAAEmB,MAAM,CAACJ,EAAT,CAA9B;AACD;;;wCAEmB;AAAA,UACVI,MADU,GACC,KAAKX,KAAL,CAAWY,KADZ,CACVD,MADU;AAGlB,WAAKX,KAAL,CAAWQ,QAAX,CAAqBhB,SAAS,CAAEmB,MAAM,CAACJ,EAAT,CAA9B;AACD;;;2CAEsB;AACrB;AACA,WAAKP,KAAL,CAAWQ,QAAX,CAAqBf,UAAU,CAAC,IAAD,CAA/B;AACD,K,CAED;;;;6BASQ;AACN,UAAIoB,IAAI,GAAG,KAAKC,OAAhB;AADM,wBAE8B,KAAKd,KAFnC;AAAA,UAEED,IAFF,eAEEA,IAFF;AAAA,UAEQgB,OAFR,eAEQA,OAFR;AAAA,UAEiBC,QAFjB,eAEiBA,QAFjB;;AAGN,UAAID,OAAJ,EAAa;AAAE,eAAS,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAT;AAAwB;;AACvC,aACE;AAAK,QAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACG,KAAKjB,cAAL,EADH,EAEE,oBAAC,QAAD;AAAU,QAAA,IAAI,EAAEC,IAAhB;AAAsB,QAAA,QAAQ,EAAEiB,QAAhC;AAA0C,QAAA,KAAK,EAAEH,IAAI,CAACI,eAAtD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,CADF;AAMD;;;;EAxDgB9B,S;;AAAbU,I,CA6CGqB,W,GAActB,W;;AAavB,IAAMuB,eAAe,GAAG,SAAlBA,eAAkB,CAACb,KAAD,EAAW;AAAA,MACzBU,QADyB,GACNV,KADM,CACzBU,QADyB;AAAA,MACfjB,IADe,GACNO,KADM,CACfP,IADe;AAEjC,SAAO;AACLA,IAAAA,IAAI,EAAER,cAAc,CAACe,KAAD,CADf;AAELU,IAAAA,QAAQ,EAARA,QAFK;AAGLD,IAAAA,OAAO,EAAEhB,IAAI,CAACgB;AAHT,GAAP;AAKD,CAPD;;AAQAlB,IAAI,CAACqB,WAAL,GAAmBtB,WAAnB;AACA,eAAeN,OAAO,CAAC6B,eAAD,CAAP,CAA0BzB,YAAY,CAACG,IAAD,CAAtC,CAAf","sourcesContent":["import React, { Component } from 'react'\nimport ProdFull from './ProdFull'\nimport Loading from 'pages/Loading'\nimport { connect } from \"react-redux\";\nimport { getVisibleProd } from 'state/selectors'\nimport { fetchProd, setLoading } from 'state/actions'\nimport withTemplate from 'templates/'\nimport { Redirect } from 'react-router-dom'\nimport {i18nContext} from 'contexts/i18n';\n\nclass Prod extends Component {\n  // // pulisco lo stato\n  // cleanComponent( nextProp ) {\n  //   window.scrollTo(0, 0)\n  //   // esci dalla funzione se non soddisfa le caratteristiche (evita l'uso di if/else)\n  //   if ( nextProp === undefined || nextProp === this.props.prod.id )  return\n  //   // se non esce, esegue la funzione\n  //   const { params } = this.props.match\n  //   this.props.dispatch(\n  //     fetchProd( params.id )\n  //   )\n  // }\n\n  componentWillReceiveProps(nextProps) {\n    const nextProp = nextProps.location.state\n    // esci dalla funzione se non soddisfa le caratteristiche (evita l'uso di if/else)\n    if ( nextProp === undefined || nextProp === this.props.prod.id )  return\n    // risetto il loader a true per attendere il nuovo prodotto\n    this.props.dispatch( setLoading(true) )\n    // se non esce, esegue la funzione\n    window.scrollTo(0, 0)\n    const { params } = this.props.match\n\n    this.props.dispatch( fetchProd( params.id ) )\n  }\n\n  componentDidMount() {\n    const { params } = this.props.match\n\n    this.props.dispatch( fetchProd( params.id ) )\n  }\n\n  componentWillUnmount() {\n    // risetto il loader a true per attendere il nuovo prodotto\n    this.props.dispatch( setLoading(true) )\n  }\n\n  // se il prodotto non esiste, faccio redirect alla home\n  renderRedirect = () => {\n    const { prod } = this.props\n    if ( ! prod || prod === undefined || prod.length <= 0 ) {\n      return <Redirect to='/' />\n    }\n  }\n\n  static contextType = i18nContext;\n  render(){\n    let i18n = this.context;\n    const { prod, loading, currency } = this.props\n    if (loading) { return ( <Loading /> ) }\n    return (\n      <div className=\"p-prod\">\n        {this.renderRedirect()}\n        <ProdFull prod={prod} currency={currency} title={i18n.also_interested} />\n      </div>\n    )\n  }\n}\nconst mapStateToProps = (state) => {\n  const { currency, prod } = state\n  return {\n    prod: getVisibleProd(state),\n    currency,\n    loading: prod.loading\n  }\n}\nProd.contextType = i18nContext\nexport default connect(mapStateToProps)( withTemplate(Prod) );\n"]},"metadata":{},"sourceType":"module"}