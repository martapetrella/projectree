{"ast":null,"code":"import _classCallCheck from \"/Users/wefed01/Sites/affx/public_html/react/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/wefed01/Sites/affx/public_html/react/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/wefed01/Sites/affx/public_html/react/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/wefed01/Sites/affx/public_html/react/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/wefed01/Sites/affx/public_html/react/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/wefed01/Sites/affx/public_html/react/src/pages/Prods/index.js\";\nimport React, { Component } from 'react';\nimport { connect } from \"react-redux\";\nimport { getVisibleProds } from 'state/selectors';\nimport MgsError from 'components/MsgError/';\nimport Item from 'pages/Prods/Lists/Row/';\nimport { setLang, fetchProds, setLoading } from 'state/actions';\nimport Loading from 'pages/Loading';\nimport withTemplate from 'templates/';\nimport Cat from 'components/Banner/Category'; // import withTemplate from 'templates/'\n\nvar Prods =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Prods, _Component);\n\n  function Prods() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Prods);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Prods)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _this.updateAll = function (lang, cat) {\n      _this.props.dispatch(setLang(lang));\n\n      _this.props.dispatch(fetchProds(lang, cat));\n    };\n\n    return _this;\n  }\n\n  _createClass(Prods, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.updateAll(this.props.match.params.lang, this.props.match.params.catid);\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      var nextProp = nextProps.location.state;\n      var params = this.props.match.params; // esci dalla funzione se non soddisfa le caratteristiche (evita l'uso di if/else)\n\n      if (nextProp === undefined || nextProp === params.catid) return; // risetto il loader a true per attendere il nuovo prodotto\n\n      this.props.dispatch(setLoading(true)); // se non esce, esegue la funzione\n\n      window.scrollTo(0, 0);\n      this.updateAll(params.lang, nextProp);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      // risetto il loader a true per attendere il nuovo prodotto\n      this.props.dispatch(setLoading(true));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          prods = _this$props.prods,\n          loading = _this$props.loading,\n          error = _this$props.error;\n      var _this$props$match$par = this.props.match.params,\n          catname = _this$props$match$par.catname,\n          catid = _this$props$match$par.catid;\n\n      if (loading) {\n        return React.createElement(Loading, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 41\n          },\n          __self: this\n        });\n      }\n\n      var prodotto = error ? React.createElement(MgsError, {\n        error: error,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 43\n        },\n        __self: this\n      }) : prods.map(function (prod) {\n        return React.createElement(Item, {\n          prod: prod,\n          key: prod.id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 44\n          },\n          __self: this\n        });\n      });\n      var title = catname ? React.createElement(\"div\", {\n        className: \"pb-4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 45\n        },\n        __self: this\n      }, React.createElement(Cat, {\n        id: \"cat_\" + catid,\n        title: catname,\n        align: \"center\",\n        img: catid,\n        classes: ' mini-height c-banner--with-opacity ',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 46\n        },\n        __self: this\n      })) : '';\n      return React.createElement(\"div\", {\n        className: \"p-prods\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54\n        },\n        __self: this\n      }, title, React.createElement(\"section\", {\n        className: \"c-prods__wrapper \" + (catname ? 'container' : ''),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56\n        },\n        __self: this\n      }, prodotto));\n    }\n  }]);\n\n  return Prods;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  var currency = state.currency,\n      prods = state.prods;\n  return {\n    prods: getVisibleProds(state),\n    currency: currency,\n    loading: prods.loading,\n    error: prods.error\n  };\n};\n\nexport default connect(mapStateToProps)(withTemplate(Prods));","map":{"version":3,"sources":["/Users/wefed01/Sites/affx/public_html/react/src/pages/Prods/index.js"],"names":["React","Component","connect","getVisibleProds","MgsError","Item","setLang","fetchProds","setLoading","Loading","withTemplate","Cat","Prods","updateAll","lang","cat","props","dispatch","match","params","catid","nextProps","nextProp","location","state","undefined","window","scrollTo","prods","loading","error","catname","prodotto","map","prod","id","title","mapStateToProps","currency"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { connect } from \"react-redux\";\nimport { getVisibleProds } from 'state/selectors'\nimport MgsError from 'components/MsgError/'\nimport Item from 'pages/Prods/Lists/Row/'\nimport { setLang, fetchProds, setLoading } from 'state/actions'\nimport Loading from 'pages/Loading'\nimport withTemplate from 'templates/'\nimport Cat from 'components/Banner/Category'\n// import withTemplate from 'templates/'\n\nclass Prods extends Component {\n  componentDidMount () {\n    this.updateAll( this.props.match.params.lang, this.props.match.params.catid )\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const nextProp = nextProps.location.state\n    const { params } = this.props.match\n    // esci dalla funzione se non soddisfa le caratteristiche (evita l'uso di if/else)\n    if ( nextProp === undefined || nextProp === params.catid )  return\n    // risetto il loader a true per attendere il nuovo prodotto\n    this.props.dispatch( setLoading(true) )\n    // se non esce, esegue la funzione\n    window.scrollTo(0, 0)\n    this.updateAll( params.lang, nextProp )\n  }\n\n  componentWillUnmount() {\n    // risetto il loader a true per attendere il nuovo prodotto\n    this.props.dispatch( setLoading(true) )\n  }\n\n  updateAll = (lang,cat) => {\n    this.props.dispatch(setLang(lang))\n    this.props.dispatch(fetchProds(lang,cat))\n  }\n  render() {\n    const { prods, loading, error } = this.props\n    const { catname, catid } = this.props.match.params\n    if (loading) { return ( <Loading /> ) }\n    const prodotto = ( error )\n                        ? <MgsError error={error} />\n                        : prods.map((prod) => ( <Item prod={prod} key={prod.id} /> ))\n    const title = catname ? <div className=\"pb-4\">\n                              <Cat id={\"cat_\"+catid}\n                                   title={catname}\n                                   align={\"center\"}\n                                   img={catid}\n                                   classes={' mini-height c-banner--with-opacity '}\n                              />\n                            </div> : '';\n    return (\n      <div className=\"p-prods\">\n        { title }\n        <section className={\"c-prods__wrapper \"+(catname ? 'container' : '')}>\n          { prodotto }\n        </section>\n      </div>\n    )\n  }\n}\nconst mapStateToProps = (state) => {\n  const { currency, prods } = state\n  return {\n    prods: getVisibleProds(state),\n    currency,\n    loading: prods.loading,\n    error: prods.error\n  }\n}\nexport default connect(mapStateToProps)( withTemplate(Prods) );\n"]},"metadata":{},"sourceType":"module"}