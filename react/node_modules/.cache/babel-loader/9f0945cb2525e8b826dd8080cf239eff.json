{"ast":null,"code":"import _classCallCheck from \"/Users/wefed01/Sites/affx/public_html/react/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/wefed01/Sites/affx/public_html/react/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/wefed01/Sites/affx/public_html/react/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/wefed01/Sites/affx/public_html/react/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/wefed01/Sites/affx/public_html/react/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/wefed01/Sites/affx/public_html/react/src/pages/Prods/Prod/ProdFull.js\";\nimport React, { Component } from 'react';\nimport { connect } from \"react-redux\";\nimport Infos from './parts/Infos/';\nimport Form from './parts/Form/';\nimport Boxes from './parts/Boxes/';\nimport Faqs from './parts/Faqs/'; //import Review from './parts/Review'\n\nimport Related from './parts/Related/';\nimport Aside from './parts/Aside';\nimport Modal from 'components/Modal/';\nimport BtnUp from './parts/BtnUp/';\nimport Schema from \"pages/Prods/Prod/parts/Schema\";\nimport { i18nContext } from 'contexts/i18n';\nimport Breadcrumb from 'templates/parts/Breadcrumb/';\nimport { LazyLoadComponent } from 'react-lazy-load-image-component';\nimport { getCategLink } from \"helpers/getPath\";\nimport { updateCart } from 'state/actions';\nimport { parseIfJsonString } from \"helpers/object_and_json\";\nimport { getCookie, setCookie } from \"helpers/cookies\";\n\nvar ProdFull =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ProdFull, _Component);\n\n  function ProdFull(props) {\n    var _this;\n\n    _classCallCheck(this, ProdFull);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ProdFull).call(this, props));\n\n    _this.preorder = function () {//console.log('preorder')\n    };\n\n    _this.openModalHandler = function () {\n      _this.setState({\n        isShowing: true\n      });\n\n      _this.preorder(); // lancia l'azione di trigger del preorder\n\n    };\n\n    _this.closeModalHandler = function () {\n      _this.setState({\n        isShowing: false\n      });\n    };\n\n    _this.addToCart = function () {\n      var _this$props = _this.props,\n          prod = _this$props.prod,\n          cart = _this$props.cart;\n\n      _this.props.dispatch(updateCart(prod.id));\n\n      var stateCart = cart; // prende il cookie e lo parsa\n\n      var cookieCart = parseIfJsonString(getCookie('cart')); // compara i due arrays, se esistono\n\n      var stateCartCMP = stateCart.list ? JSON.stringify(stateCart.list.sort()) : false;\n      var cookieCartCPM = cookieCart.list ? JSON.stringify(cookieCart.list.sort()) : false;\n      console.log('header', 'state:', stateCartCMP, 'cookie:', cookieCartCPM); // se sono diversi, aggiorna il cookie con ciò che ho nello stato\n\n      if (stateCartCMP !== cookieCartCPM) setCookie('cart', cart);\n    };\n\n    _this.state = {\n      isShowing: false\n    };\n    return _this;\n  }\n\n  _createClass(ProdFull, [{\n    key: \"render\",\n    value: function render() {\n      var i18n = this.context;\n      var prod = this.props.prod;\n      var categLink = getCategLink(i18n.lang, prod).pathname;\n      var modal = React.createElement(Modal, {\n        prod: prod,\n        show: this.state.isShowing,\n        close: this.closeModalHandler,\n        title: i18n.order_now_cta + ' ' + prod.name,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61\n        },\n        __self: this\n      }, React.createElement(Form, {\n        prod: prod,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      }));\n      return React.createElement(\"div\", {\n        className: \"p-prod__full\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        onClick: this.addToCart,\n        className: \"btn btn-success\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, \"TEST ADD TO CART\"), modal, React.createElement(Breadcrumb, {\n        pattern: [{\n          name: prod.category_name,\n          link: categLink\n        }],\n        destination: prod.name,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }), React.createElement(Schema, {\n        prod: prod,\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-12 col-lg-8\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, React.createElement(Infos, {\n        prod: prod,\n        openModalHandler: this.openModalHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"btn-go-up-wrapper\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, React.createElement(BtnUp, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }), React.createElement(Boxes, {\n        prod: prod,\n        openModalHandler: this.openModalHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }), React.createElement(Faqs, {\n        prod: prod,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }), React.createElement(BtnUp, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"col d-none d-lg-block\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }, React.createElement(Aside, {\n        prod: prod,\n        showForm: false,\n        openModalHandler: this.openModalHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }))), React.createElement(LazyLoadComponent, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }), React.createElement(Related, {\n        prod: prod,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return ProdFull;\n}(Component);\n\nProdFull.contextType = i18nContext;\nProdFull.contextType = i18nContext;\n\nvar mapStateToProps = function mapStateToProps(state) {\n  var cart = state.cart;\n  return {\n    cart: cart\n  };\n};\n\nexport default connect(mapStateToProps)(ProdFull);","map":{"version":3,"sources":["/Users/wefed01/Sites/affx/public_html/react/src/pages/Prods/Prod/ProdFull.js"],"names":["React","Component","connect","Infos","Form","Boxes","Faqs","Related","Aside","Modal","BtnUp","Schema","i18nContext","Breadcrumb","LazyLoadComponent","getCategLink","updateCart","parseIfJsonString","getCookie","setCookie","ProdFull","props","preorder","openModalHandler","setState","isShowing","closeModalHandler","addToCart","prod","cart","dispatch","id","stateCart","cookieCart","stateCartCMP","list","JSON","stringify","sort","cookieCartCPM","console","log","state","i18n","context","categLink","lang","pathname","modal","order_now_cta","name","category_name","link","contextType","mapStateToProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { connect } from \"react-redux\"\nimport Infos from './parts/Infos/'\nimport Form from './parts/Form/'\nimport Boxes from './parts/Boxes/'\nimport Faqs from './parts/Faqs/'\n//import Review from './parts/Review'\nimport Related from './parts/Related/'\nimport Aside from './parts/Aside'\nimport Modal from 'components/Modal/';\nimport BtnUp from './parts/BtnUp/'\nimport Schema from \"pages/Prods/Prod/parts/Schema\"\nimport {i18nContext} from 'contexts/i18n';\nimport Breadcrumb from 'templates/parts/Breadcrumb/'\nimport { LazyLoadComponent } from 'react-lazy-load-image-component';\nimport { getCategLink } from \"helpers/getPath\"\nimport { updateCart } from 'state/actions'\n\n\nimport { parseIfJsonString } from \"helpers/object_and_json\"\nimport { getCookie, setCookie } from \"helpers/cookies\"\n\n\nclass ProdFull extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      isShowing: false\n    }\n  }\n  preorder = () => {\n    //console.log('preorder')\n  }\n  openModalHandler = () => {\n    this.setState({ isShowing: true });\n    this.preorder(); // lancia l'azione di trigger del preorder\n  }\n  closeModalHandler = () => {\n    this.setState({ isShowing: false });\n  }\n  addToCart = () => {\n    const { prod, cart } = this.props\n    this.props.dispatch( updateCart(prod.id) )\n\n    let stateCart = cart\n    // prende il cookie e lo parsa\n    let cookieCart = parseIfJsonString( getCookie('cart') )\n    // compara i due arrays, se esistono\n    let stateCartCMP  = stateCart.list ? JSON.stringify(stateCart.list.sort()) : false\n    let cookieCartCPM = cookieCart.list ? JSON.stringify(cookieCart.list.sort()) : false\nconsole.log('header','state:',stateCartCMP,'cookie:',cookieCartCPM);\n    // se sono diversi, aggiorna il cookie con ciò che ho nello stato\n    if(stateCartCMP!==cookieCartCPM) setCookie('cart', cart )\n\n  }\n  static contextType = i18nContext;\n  render(){\n  let i18n = this.context;\n  const { prod } = this.props\n  let categLink = getCategLink(i18n.lang,prod).pathname\n  const modal = <Modal prod={prod}\n                     show={this.state.isShowing}\n                     close={this.closeModalHandler}\n                     title={i18n.order_now_cta+' '+prod.name}>\n                    <Form prod={prod} />\n                </Modal>\n  return (\n        <div className=\"p-prod__full\">\n\n        <button onClick={this.addToCart} className=\"btn btn-success\">TEST ADD TO CART</button>\n\n          {modal}\n          <Breadcrumb pattern={[{name:prod.category_name,link:categLink}]} destination={prod.name} />\n          <Schema prod={prod} className=\"row\">\n            <div className=\"col-12 col-lg-8\">\n              <Infos prod={prod} openModalHandler={this.openModalHandler} />\n              <div className=\"btn-go-up-wrapper\">\n                <BtnUp />\n                <Boxes prod={prod} openModalHandler={this.openModalHandler} />\n                <Faqs prod={prod} />\n                <BtnUp />\n              </div>\n            </div>\n            <div className=\"col d-none d-lg-block\">\n              <Aside prod={prod} showForm={false} openModalHandler={this.openModalHandler} />\n            </div>\n          </Schema>\n          <LazyLoadComponent>\n            <hr />\n            <Related prod={prod} />\n          </LazyLoadComponent>\n        </div>\n      )\n    }\n}\nProdFull.contextType = i18nContext\n\nconst mapStateToProps = (state) => {\n  const { cart } = state\n  return {\n    cart\n  }\n}\nexport default connect(mapStateToProps)( ProdFull );\n"]},"metadata":{},"sourceType":"module"}