{"ast":null,"code":"import _toConsumableArray from \"/Users/wefed01/Sites/affx/public_html/react/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"/Users/wefed01/Sites/affx/public_html/react/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nexport default function cart(state, action) {\n  var a = action.payload;\n  var p = a ? a.list : false;\n  var prod = p ? {\n    id: p.id,\n    network: p.network,\n    code: p.code,\n    name: p.name,\n    slug: p.slug,\n    lang: p.lang,\n    country: p.country,\n    currency: p.currency,\n    price: p.price,\n    oldprice: p.oldprice\n  } : false;\n\n  switch (action.type) {\n    case 'SET_CART':\n      console.log('set');\n      return _objectSpread({}, state, {\n        list: a.list\n      });\n\n    case 'ADD_TO_CART':\n      console.log('add'); // https://stackoverflow.com/questions/41364383/remove-duplicates-form-an-array/41364495\n\n      return _objectSpread({}, state, {\n        list: state.list ? _toConsumableArray(new Set([].concat(_toConsumableArray(state.list), [prod]).map(function (a) {\n          return a;\n        }))) : [prod]\n      });\n\n    case 'REMOVE_TO_CART':\n      if (state.list.length > 0 && a.index !== undefined) {\n        console.log('si', state.list, newArray);\n        var newArray = state.list.splice(a.index, 1);\n        return _objectSpread({}, state, {\n          list: newArray\n        });\n      } else {\n        console.log('no');\n        return state;\n      }\n\n    default:\n      return state;\n  }\n}","map":{"version":3,"sources":["/Users/wefed01/Sites/affx/public_html/react/src/state/reducers/cart.js"],"names":["cart","state","action","a","payload","p","list","prod","id","network","code","name","slug","lang","country","currency","price","oldprice","type","console","log","Set","map","length","index","undefined","newArray","splice"],"mappings":";;AAAA,eAAe,SAASA,IAAT,CAAcC,KAAd,EAAqBC,MAArB,EAA6B;AAE1C,MAAIC,CAAC,GAAGD,MAAM,CAACE,OAAf;AACA,MAAIC,CAAC,GAAGF,CAAC,GAAGA,CAAC,CAACG,IAAL,GAAY,KAArB;AAEA,MAAIC,IAAI,GAAGF,CAAC,GAAG;AAAEG,IAAAA,EAAE,EAACH,CAAC,CAACG,EAAP;AAAWC,IAAAA,OAAO,EAACJ,CAAC,CAACI,OAArB;AAA8BC,IAAAA,IAAI,EAACL,CAAC,CAACK,IAArC;AAA2CC,IAAAA,IAAI,EAACN,CAAC,CAACM,IAAlD;AACEC,IAAAA,IAAI,EAACP,CAAC,CAACO,IADT;AACeC,IAAAA,IAAI,EAACR,CAAC,CAACQ,IADtB;AAC4BC,IAAAA,OAAO,EAACT,CAAC,CAACS,OADtC;AAEEC,IAAAA,QAAQ,EAACV,CAAC,CAACU,QAFb;AAEuBC,IAAAA,KAAK,EAACX,CAAC,CAACW,KAF/B;AAEsCC,IAAAA,QAAQ,EAACZ,CAAC,CAACY;AAFjD,GAAH,GAGG,KAHf;;AAKA,UAAQf,MAAM,CAACgB,IAAf;AACI,SAAK,UAAL;AACIC,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ;AACA,+BACOnB,KADP;AAEIK,QAAAA,IAAI,EAAGH,CAAC,CAACG;AAFb;;AAIJ,SAAK,aAAL;AACEa,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ,EADF,CAEE;;AACA,+BACOnB,KADP;AAEIK,QAAAA,IAAI,EAAGL,KAAK,CAACK,IAAN,sBAAiB,IAAIe,GAAJ,CAAQ,6BAAIpB,KAAK,CAACK,IAAV,IAAgBC,IAAhB,GAAsBe,GAAtB,CAA0B,UAAAnB,CAAC;AAAA,iBAAIA,CAAJ;AAAA,SAA3B,CAAR,CAAjB,IAA+D,CAACI,IAAD;AAF1E;;AAIF,SAAK,gBAAL;AACE,UAAIN,KAAK,CAACK,IAAN,CAAWiB,MAAX,GAAoB,CAApB,IAAyBpB,CAAC,CAACqB,KAAF,KAAYC,SAAzC,EAAqD;AACnDN,QAAAA,OAAO,CAACC,GAAR,CAAY,IAAZ,EAAiBnB,KAAK,CAACK,IAAvB,EAA4BoB,QAA5B;AACA,YAAIA,QAAQ,GAAGzB,KAAK,CAACK,IAAN,CAAWqB,MAAX,CAAkBxB,CAAC,CAACqB,KAApB,EAA0B,CAA1B,CAAf;AACA,iCACOvB,KADP;AAEIK,UAAAA,IAAI,EAAGoB;AAFX;AAID,OAPD,MAOO;AACLP,QAAAA,OAAO,CAACC,GAAR,CAAY,IAAZ;AACA,eAAOnB,KAAP;AACD;;AAEH;AACI,aAAOA,KAAP;AA5BR;AA8BD","sourcesContent":["export default function cart(state, action) {\n\n  let a = action.payload\n  let p = a ? a.list : false\n\n  let prod = p ? { id:p.id, network:p.network, code:p.code, name:p.name,\n                   slug:p.slug, lang:p.lang, country:p.country,\n                   currency:p.currency, price:p.price, oldprice:p.oldprice }\n               : false\n\n  switch (action.type) {\n      case 'SET_CART':\n          console.log('set');\n          return {\n              ...state,\n              list:  a.list,\n          }\n      case 'ADD_TO_CART':\n        console.log('add');\n        // https://stackoverflow.com/questions/41364383/remove-duplicates-form-an-array/41364495\n        return {\n            ...state,\n            list : state.list ? [...new Set([...state.list, prod].map(a => a))] : [prod]\n        }\n      case 'REMOVE_TO_CART':\n        if( state.list.length > 0 && a.index !== undefined ) {\n          console.log('si',state.list,newArray);\n          let newArray = state.list.splice(a.index,1)\n          return {\n              ...state,\n              list : newArray\n          }\n        } else {\n          console.log('no');\n          return state;\n        }\n\n      default:\n          return state;\n    }\n}\n"]},"metadata":{},"sourceType":"module"}